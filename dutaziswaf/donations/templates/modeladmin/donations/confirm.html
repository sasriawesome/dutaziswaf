{% extends "wagtailadmin/base.html" %}
{% load i18n modeladmin_tags %}

{% block titletag %}{{ view.get_meta_title }}{% endblock %}

{% block content %}

{% block header %}
{% include "wagtailadmin/shared/header.html" with title=view.get_page_title subtitle=view.get_page_subtitle icon=view.header_icon %}
{% endblock %}

{% block content_main %}
<div class="nice-padding">
  {% if confirmation_error %}
  <h2>{% blocktrans with view.verbose_name|capfirst as model_name %}{{ model_name }} could not be confirmed{% endblocktrans %}</h2>
  <p>{% blocktrans with instance as instance_name %}'{{ instance_name }}' cannot be confirmed with any invalid data. To confirm it successfully, first provide required data from the following objects, then try again:{% endblocktrans %}</p>
  <ul>
    {% for obj in linked_objects %}
    <li><b>{{ obj|get_content_type_for_obj|title }}:</b> {{ obj }}</li>
    {% endfor %}
  </ul>
  <p><a href="{{ view.index_url }}" class="button">{% trans 'Go back to listing' %}</a></p>
  {% else %}
  <p>{{ view.confirmation_message }}</p>
  <p>{% blocktrans %}<strong>Warning :</strong> Data confirmation is not reversible {% endblocktrans %}</p>
  <form action="{{ view.confirm_url }}" method="POST">
    {% csrf_token %}
    <p>{% trans 'Please provide object ID' %} <code>{{ instance.inner_id }}</code><br></p>
    <div>
      <input class="mb-2 w-50" type="text" name="inner_id" required>
      {% if password_error %}<div class="error-message mb-3">{% trans 'Inner ID does not match' %}</div>{% endif %}
    </div>
    <input type="submit" value="{% trans 'Yes, Confirm' %}" class="button serious"/>
    <a href="{{ view.index_url }}" class="button button-secondary">{% trans "No, don't confirm" %}</a>
  </form>
  {% endif %}
</div>
{% endblock %}
{% endblock %}
